# Enable networking
iwctl 
help

# Before arch-chroot
# fdisk partition, mkfs.ext4 and mount at /mnt
timedatectl set-ntp true
pacstrap /mnt base linux linux-firmware wpa_supplicant gvim tmux iproute2 dhcpcd grub efibootmgr xorg kde-applications plasma tlp xclip os-prober git sudo xorg-xinit xterm zsh fzf ripgrep gcc make cmake flake8 python-pip ctags autopep8 rustfmt clang base-devel docker docker-compose wireguard-tools
arch-chroot /mnt

# After arch-chroot, mount efi partition at /esp
grub-install --target=x86_64-efi --efi-directory=/esp --bootloader-id=GRUB
grub-mkconfig -o /boot/grub/grub.cfg
ln -sf /usr/share/zoneinfo/Asia/Singapore /etc/localtime

# Edit /etc/locale.gen
locale-gen

# Edit /etc/hostname
# Edit /etc/hosts
# Set passwd
# Edit /etc/sudoers to give wheel group sudo rights

# Create user
useradd -m -G wheel -s /bin/bash arch
passwd arch
# add to docker group
groupadd docker
usermod -aG docker arch

# Set up oh-my-zsh
sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"

# Set up vim
curl -fLo $HOME/.vim/autoload/plug.vim --create-dirs \
      https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
sudo -H pip3 install pynvim

# Set up tmux
git clone https://github.com/tmux-plugins/tpm $HOME/.tmux/plugins/tpm
curl https://raw.githubusercontent.com/imomaliev/tmux-bash-completion/master/completions/tmux | sudo tee -a /usr/share/bash-completion/completions/tmux

# open GUI
startx /usr/bin/startplasma-x11
